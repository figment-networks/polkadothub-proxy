syntax = "proto3";

import "google/protobuf/timestamp.proto";

package block;
option go_package = "grpc/block/blockpb";

message Header {
  google.protobuf.Timestamp time = 1;
  string block_hash = 2;
  string parent_hash = 3;
  int64  height = 4;
  string state_root = 5;
  string extrinsics_root = 6;
}

message Extrinsic {
  int64 extrinsic_index = 1;
  string hash = 2;
  bool is_signed_transaction = 3;
  string signature = 4;
  string signer = 5;
  int64  nonce = 6;
  string method = 7;
  string section = 8;
  string args = 9;
  bool is_success = 10;
}

message Block {
  Header header = 2;
  repeated Extrinsic extrinsics = 3;
}

message GetHeadRequest {}

message GetHeadResponse {
  int64 height = 1;
  google.protobuf.Timestamp time = 2;
  int64 session = 3;
  int64 era = 4;
}

message GetByHeightRequest {
  int64 height = 1;
}

message GetByHeightResponse {
  int64 session = 1;
  int64 era = 3;
  string chain = 5;
  string spec_version = 6;
  Block block = 7;
}

message GetMetaByHeightRequest {
  int64 height = 1;
}

message GetMetaByHeightResponse {
  int64 session = 1;
  int64 era = 2;
  bool last_in_session = 3;
  bool last_in_era = 4;
  string chain = 5;
  string spec_version = 6;
}

service BlockService {
  rpc GetHead (GetHeadRequest) returns (GetHeadResponse) {}
  rpc GetMetaByHeight (GetMetaByHeightRequest) returns (GetMetaByHeightResponse) {}
  rpc GetByHeight (GetByHeightRequest) returns (GetByHeightResponse) {}
}

